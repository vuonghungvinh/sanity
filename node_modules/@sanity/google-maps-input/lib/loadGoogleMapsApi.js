'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var loadingPromise = null;

function loadGoogleMapsApi(props) {
  var callbackName = '___sanity_googleMapsApiCallback';
  var selectedLocale = props.locale || 'en-US';
  var apiKey = props.apiKey;

  if (window.google && window.google.maps) {
    return Promise.resolve(window.google.maps);
  }

  if (window[callbackName]) {
    return loadingPromise;
  }

  loadingPromise = new Promise(function (resolve, reject) {
    window[callbackName] = function () {
      delete window[callbackName];
      resolve(window.google.maps);
    };

    var script = document.createElement('script');
    script.src = 'https://maps.googleapis.com/maps/api/js?key=' + apiKey + '&libraries=places&callback=' + callbackName + '&language=' + selectedLocale;
    document.getElementsByTagName('head')[0].appendChild(script);
  });

  return loadingPromise;
}

exports.default = loadGoogleMapsApi;