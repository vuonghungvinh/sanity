'use strict';

var _merge2 = require('lodash/merge');

var _merge3 = _interopRequireDefault(_merge2);

var _localeMessages = require('all:part:@sanity/base/locale-messages');

var _localeMessages2 = _interopRequireDefault(_localeMessages);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mergedMessages = _localeMessages2.default.reduce(function (prev, curr) {
  return (0, _merge3.default)(prev, curr);
}, {});

function fetchLocalizedMessages(language) {
  var languagePrefix = language.split('-')[0];
  var localizedMessages = mergedMessages[language] || mergedMessages[languagePrefix];
  if (!localizedMessages) {
    console.warn('No localized messages for language ' + language); // eslint-disable-line no-console
  }
  return Promise.resolve(localizedMessages || {});
}

function fetchAllMessages() {
  return Promise.resolve(mergedMessages);
}

module.exports = {
  fetchLocalizedMessages: fetchLocalizedMessages,
  fetchAllMessages: fetchAllMessages
};