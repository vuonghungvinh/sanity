'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = resolveRefType;

var _client = require('part:@sanity/base/client');

var _client2 = _interopRequireDefault(_client);

var _observable = require('@sanity/observable');

var _observable2 = _interopRequireDefault(_observable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function resolveRefTypeName(value) {
  return _observable2.default.from(_client2.default.observable.fetch('*[_id == $id][0]._type', { id: value._ref }));
}

function resolveRefType(value, type) {
  return resolveRefTypeName(value).map(function (refTypeName) {
    return type.to.find(function (toType) {
      return toType.name === refTypeName;
    });
  });
}