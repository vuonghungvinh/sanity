'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CLEANUP_EVENT = undefined;
exports.createUploadEvent = createUploadEvent;
exports.createInitialUploadEvent = createInitialUploadEvent;

var _typedefs = require('./typedefs');

var _constants = require('./constants');

var _patches = require('../../utils/patches');

var UNSET_UPLOAD_PATCH = (0, _patches.unset)([_constants.UPLOAD_STATUS_KEY]);

function createUploadEvent() /*: UploadEvent*/ {
  var patches = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

  return {
    type: 'uploadEvent',
    patches: patches
  };
}

var CLEANUP_EVENT = exports.CLEANUP_EVENT = createUploadEvent([UNSET_UPLOAD_PATCH]);

function createInitialUploadEvent(file /*: File*/) {
  return createUploadEvent([(0, _patches.set)({
    progress: 2,
    initiated: new Date().toISOString(),
    file: { name: file.name, type: file.type }
  }, [_constants.UPLOAD_STATUS_KEY])]);
}