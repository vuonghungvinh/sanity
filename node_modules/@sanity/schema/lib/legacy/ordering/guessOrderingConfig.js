'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _startCase2 = require('lodash/startCase');

var _startCase3 = _interopRequireDefault(_startCase2);

var _capitalize2 = require('lodash/capitalize');

var _capitalize3 = _interopRequireDefault(_capitalize2);

exports.default = guessOrderingConfig;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var CANDIDATES = ['title', 'name', 'label', 'heading', 'header', 'caption', 'description'];

var PRIMITIVES = ['string', 'boolean', 'number'];

var isPrimitive = function isPrimitive(field) {
  return PRIMITIVES.includes(field.type);
};

function guessOrderingConfig(objectTypeDef) {

  var candidates = CANDIDATES.filter(function (candidate) {
    return objectTypeDef.fields.some(function (field) {
      return field.name === candidate;
    });
  });

  // None of the candidates were found, fallback to all fields
  if (candidates.length === 0) {
    candidates = objectTypeDef.fields.filter(isPrimitive).map(function (field) {
      return field.name;
    });
  }

  return candidates.map(function (name) {
    return {
      name: name,
      title: (0, _capitalize3.default)((0, _startCase3.default)(name)),
      by: [{ field: name, direction: 'asc' }]
    };
  });
}