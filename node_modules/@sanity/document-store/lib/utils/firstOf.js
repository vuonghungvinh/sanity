'use strict';

var Observable = require('@sanity/observable');

module.exports = function firstOf(observable) {
  var filterFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (value) {
    return true;
  };

  return new Observable(function (observer) {
    var subscription = observable.subscribe(function (value) {
      if (filterFn(value)) {
        observer.next(value);
        observer.complete();
      }
    });
    return function () {
      subscription.unsubscribe();
    };
  });
};